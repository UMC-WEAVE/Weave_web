<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Weave</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  <link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet">
  <link href="css/team-modal.css" rel="stylesheet">
</head>
<body>
  <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
  팀
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">팀</h5>
        <button id="modalBtn" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <table class="table table-border" id="teamTable1">
          <tr>
            <td class="teamMemTitle">팀원 조회</td>
            <td rowspan="10">
              <div id="teamMemList">
                <p id="demo"></p>
                <ul>
                  <li>이연후</li>
                  <li>이은서</li>
                  <li>전유영</li>
                  <li>현우</li>
                  <li>낑깡</li>
                  <li>부엉</li>
                </ul>
              </div>
            </td>
          </tr>
          <tr>
            <td rowspan="9"></td>
          </tr>
        </table>
        <table class="table table-border" id="teamTable2">
          <tr>
            <td rowspan="2"></td>
            <td class="message">
              *한 팀당 최대 10명까지 초대할 수 있어요
            </td>
            <td></td>
          </tr>
          <tr>
            <td class="message">
              *카카오 계정과 연동된 이메일을 입력해 주세요
            </td>
            <td></td>
          </tr>
          <tr>
            <td colspan="3">
              <p id="alert"></p>
            </td>
          </tr>
          <tr>
            <td class="teamMemTitle">
              팀원 초대
            </td>
            <td id="teamMemInvite">
              <input type="text" name="enter" placeholder="이메일을 입력해주세요." class="enter" value="" id="userInvite"/>
            </td>
            <td id="teamInviteBtn">
              <input type="button" value="초대하기" OnClick="chkUser()" id="inviteBtn"/>
            </td>
          </tr>
        </table>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
      </div>
    </div>
  </div>
</div>

</body>
<!-- bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script> 
<script>
  let trip1Members = '{"trip1Member":[' +
  '{"name": "이연후","email": "trip1Member1@gmail.com", "team": 101},' +
  '{"name": "이은서","email": "trip1Member2@gmail.com", "team": 101 },' +
  '{"name": "전유영","email": "trip1Member3@gmail.com", "team": 101 },' +
  '{"name": "현우","email": "trip1Member4@gmail.com", "team": 101 },' +
  '{"name": "낑깡","email": "trip1Member5@gmail.com", "team": 101 },' +
  '{"name": "부엉","email": "trip1Member6@gmail.com", "team": 101 }]}'; 
  let weaveUsers = '{"chkUser":[' +
  '{"name":"위브 유저","email":"이메일" },' +
  '{"name":"user1","email":"weaveuser1@gmail.com", "team": 100 },' +
  '{"name":"user2","email":"weaveuser2@gmail.com", "team": 100 },' +
  '{"name":"user3","email":"weaveuser3@gmail.com", "team": 100 },' +
  '{"name":"user4","email":"weaveuser4@gmail.com", "team": 100 },' +
  '{"name":"user5","email":"weaveuser5@gmail.com", "team": 100 },' +
  '{"name":"user6","email":"weaveuser6@gmail.com", "team": 100 }]}'; 
  let nonUsers = '{"invalid": [' +
  '{"message": "위브에 가입된 유저가 아닙니다."}]}'; 
  
  const memberList = JSON.parse(trip1Members);
  const userList = JSON.parse(weaveUsers);
  
  function showUsr() {
    for(j = 0; j < 6; j++) {
      document.getElementById("demo").innerHTML += memberList.trip1Member[j].name + "<br>";
    }
  }
  
  var chkValid = document.getElementById('userInvite');
  function chkUser() {
    let flag = 0;
    let i = 0;
    for(i = 1; i <= 6; i++) {
      if (chkValid.value == userList.chkUser[i].email) {
        flag = 1;
        break;
      }
    }
  
    if (flag == 1)
      document.getElementById("demo").innerHTML += userList.chkUser[i].name + "<br>";
    else
      document.getElementById("alert").innerHTML += chkValid.value + " " + userList.chkUser[0].email + "의 사용자는 "+ userList.chkUser[0].name + "가 아닙니다." + "<br>";
  }
  </script>
</html>